<g>
  {#each levelConfigAnnotated as level, i}
    <rect x={105+margin} y={startY+i*2*scale+2*margin} height={scale-2*margin} width={scale-2*margin} fill={level.color} opacity={level.opacity} />
    <text id={level.id} x={105+2*scale} y={startY+i*2*scale+scale} font-size={scale} alignment-baseline="middle" text-anchor="left" fill="Blue">
      <tspan>{level.label}</tspan>
    </text>
  {/each}
</g>

<script>

  let translateX = (r, x, radians) => x + (r * Math.sin(radians))
  let translateY = (r, y, radians) => y - (r * Math.cos(radians))

  export default {

    namespace: 'svg',

    data() {
      return {
        dirty: true,
        scale: 1,

      }
    },

    // oncreate() {
    //   let width=40, height=20  // TODO: DRY
    //
    //   let textNode = document.getElementById("ourText")
    //   let bb = textNode.getBBox()
    //   let widthScale = width / bb.width
    //   let heightScale = height / bb.height
    //   this.set({scale: Math.min(widthScale, heightScale)})
    // },

    computed: {

      junk: (s) => {
        console.log(s.startY)
      },

      margin: ({scale}) => scale / 8,

      startY: ({levelConfigAnnotated, scale}) => (100 - (2 * scale * levelConfigAnnotated.length)) / 2,

      // For the goal line
      // p1x: ({goalAnnotated, centerX, startRadians}) => translateX(goalAnnotated.radius, centerX, startRadians),
      // p1y: ({goalAnnotated, centerY, startRadians}) => translateY(goalAnnotated.radius, centerY, startRadians),
      // p2x: ({goalAnnotated, centerX, endRadians}) => translateX(goalAnnotated.radius, centerX, endRadians),
      // p2y: ({goalAnnotated, centerY, endRadians}) => translateY(goalAnnotated.radius, centerY, endRadians),
      //
      // arcSweep: ({endRadians, startRadians}) => (endRadians - startRadians <= Math.PI) ? "0" : "1",

    }
  }
</script>
